var sas=sas||{};sas.utils=sas.utils||{},sas.events=sas.events||{},function(){sas.utils.getIEVersion=function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):void 0},sas.events.addEvent=function(a,e,t){return a&&e&&t?(a.attachEvent?a.attachEvent("on"+e,t):a.addEventListener&&a.addEventListener(e,t,!1),{removeEvent:function(){a.detachEvent?a.detachEvent("on"+e,t):a.removeEventListener&&a.removeEventListener(e,t,!1)}}):void 0},sas.events.addLoadEvent=function(a,e){if(a&&e){var t="load",n=function(){return!0},r=sas.utils.getIEVersion();(11>r||a==document)&&(t="readystatechange",n=function(){return a.readyState&&"complete"!=a.readyState&&"loaded"!=a.readyState?void 0:!0});var s=sas.events.addEvent(a,t,function(){n()&&(s.removeEvent(),e.apply(this,arguments))})}}}(),function(a,e){function t(a,e,t,n,r){var s=new XMLHttpRequest;s.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var a=JSON.parse(this.responseText);t(a)}else n()},s.withCredentials=!0;var i=!0;try{s.open("POST",a,!0)}catch(o){if(i=!1,sas.utils.getIEVersion()<=9&&-2147024891==o.number){var d=new XDomainRequest;d.open("POST",a),d.ontimeout=function(){n()},d.onerror=function(){n()},d.onload=function(){var a=JSON.parse(this.responseText);t(a)},d.send(JSON.stringify(e))}}i&&(s.setRequestHeader("content-type","application/json"),s.send(JSON.stringify(e)))}function n(a){var t;if("script"==a.tagName.toLowerCase())t=e.createElement("script"),a.type&&(t.type=a.type),a.src&&(t.src=a.src),a.text&&(t.text=a.text);else{t=a.cloneNode(!1);for(var r=a.childNodes,s=0;s<r.length;s++)t.appendChild(n(r[s]))}return t}function r(a,e,t,n,r,s,i){for(var o={timestamp:t,networkId:r.networkId,siteId:a.siteId,pageId:a.pageId,pageName:a.pageName,master:e,noAdCallback:"sas.noad",pageUrl:n,screen:{height:s,width:i},uid:E||0,noCookie:r.noCookie,ads:[]},d=0;d<a.formats.length;d++){var c=a.formats[d],l=c.tagId?c.tagId:"sas_"+c.id,p=S[l]||{};isNaN(p.cpm)&&(p={}),o.ads.push({formatId:c.id,tagId:l,bidfloor:c.overriddenBidfloor,target:a.target,currency:c.currency,headerBidding:p})}return o}function s(){var e=a;try{for(;e.parent.document;){if(e.parent.document===e.document)return e.location.origin+e.location.pathname;e=e.parent}}catch(t){}try{try{if(a.top.location.href)return a.top.location.origin+a.top.location.pathname}catch(t){}var n=a.location.ancestorOrigins;return 1==n.length?e.document.referrer:n[n.length-1]}catch(t){return e.document.referrer}}function i(a){var t,n=e.createElement("a"),r=/(?:^\?|&)([^=&]+)=?([^&]*)(?=&|$)/g;n.href=a;for(var s=n.search,i=[];null!==(t=r.exec(s));){var o={n:m(t[1]),v:m(t[2])};"extuid-"===o.n.substr(0,7)&&C[o.n.substr(7)]||i.push(o)}for(var d in C)i.push({n:"extuid-"+d,v:C[d]});s="";for(var c=0;c<i.length;c++){var o=i[c];s+=(0===c?"?":"&")+g(o.n),""!==o.v&&(s+="="+g(o.v))}return n.search=s,n.href}if(!sas.__smartLoaded){sas.__smartLoaded=!0;var o=function(){},d=!1,c=function(){return Math.round(1e10*Math.random())},l="http://www.smartadserver.com",p=l,f=c(),u=!0,g=encodeURIComponent,m=decodeURIComponent,v=0,h=!1,y=0,I=!1,E=null,T={},_={},L=[],A={},N=!0,w={},C={},S={};sas._networks=sas._networks||{},sas._pendingCommands=sas._pendingCommands||{},sas.callType={STD:"std",IFRAME:"iframe",ONECALL:"onecall",ONECALL_JSON:"onecall_json",XML:"xml",PASSBACK:"passback"},sas.renderMode={DEFAULT:0,READY:1,ON_DEMAND:2};var O=!1,R=[],M=function(a){var e=function(){if(R.length>0){O=!0;var a=R.shift(),t=a.options.onLoad;a.options.onLoad=function(a){e(),t(a)},k[a.type](a.ad,a.options)}else O=!1};R.push(a),O||e()},k={},b={onLoad:o,onError:o,onClean:o,beforeRender:o};k[sas.callType.STD]=function(a,e){j(a.tagId,{ad:a,callType:sas.callType.STD,options:e,url:X(sas.callType.STD,a,e),type:"script"}),z(a.tagId)},k[sas.callType.IFRAME]=function(a,e){j(a.tagId,{ad:a,callType:sas.callType.IFRAME,options:e,url:X(sas.callType.IFRAME,a,e),type:"iframe",width:a.width||0,height:a.height||0}),z(a.tagId)},k[sas.callType.ONECALL_JSON]=function(a,e){for(var n={},r=0;r<a.formats.length;r++){var s=a.formats[r];n[s.tagId]=!0,j(s.tagId,{ad:a,callType:sas.callType.ONECALL_JSON,options:e}),j(s.tagId,{ad:{tagId:s.tagId,formatId:s.id,originalFormatId:s.id}})}var i=V(a,e),o=W(a,e);t(o,i,function(a){for(var e in a)j(e,{displayData:a[e],type:a[e].ScriptType});if(N){var t=[];for(var r in w){var s=r.split("_"),i=s.slice(0,s.length-1).join("_");(n[r]||n[i])&&(t.push(r),z(r))}for(var e=0;e<t.length;e++){var o=t[e];delete w[o]}}},e.onError,e.domain)},k[sas.callType.ONECALL]=function(a,t){for(var n=(""+a.formatId).replace(/\s/g,"").split(","),r={},s=0;s<n.length;s++){var i=n[s],o="sas_"+i;r[o]=!0,j(o,{ad:a,callType:sas.callType.ONECALL,options:t}),j(o,{ad:{tagId:o,formatId:i,originalFormatId:i}})}var d=X(sas.callType.ONECALL,a,t)();q(e.getElementsByTagName("head")[0],d,t.async,function(){if(N){var a=[];for(var e in w){var t=e.split("_"),n=t.slice(0,t.length-1).join("_");(r[e]||r[n])&&(a.push(e),z(e))}for(var s=0;s<a.length;s++){var i=a[s];delete w[i]}}},t.onError)};var x={ERR_SITE:"invalid site id",ERR_PAGE:"invalid page id or name",ERR_FORMAT:"invalid format id",ERR_CONFIG:"invalid configuration",ERR_CALL:"invalid call option"},D=function(a){throw new Error(a)};Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var F=function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t&&"object"==typeof t)for(var n in t)void 0!==t[n]&&(Array.isArray(t[n])?a[n]=t[n]:"object"==typeof t[n]?a[n]=F({},a[n],t[n]):a[n]=t[n])}return a},U=function(a){a=""+a;var e=T[a]||T["sas_"+a]||T[_[a]];if(e)return e;var t=a.split("_"),n=t.slice(0,t.length-1).join("");if(t.length>1&&!isNaN(t[t.length-1])&&(e=T[n]||T["sas_"+n])){var r="sas_"+a;return j(r,e,{ad:{tagId:r,instance:parseInt(t[t.length-1])}})}return null},j=function(a){var e=Array.prototype.slice.call(arguments,1);return T[a]=F.apply(this,[{},T[a]].concat(e)),T[a]},B=function(a){var t=e.createElement("div");return t.id=a,t},H=function(a,t,n,r){var s=e.createElement("iframe");s.id="sas_i"+t.ad.formatId+(t.ad.instance?"_"+t.ad.instance:""),s.scrolling="no",s.frameBorder=0,s.width=t.width,s.height=t.height,s.style.margin=0,s.style.padding=0,s.style.width=t.width+"px",s.style.height=t.height+"px",s.src=t.url(),sas.events.addLoadEvent(s,n),sas.events.addEvent(s,"error",r),t.options.async?a.appendChild(s):e.write(s.outerHTML)},J=1,P=function(a,t,n){var r=e.createElement("script");r.id="sas_script"+J++,r.type="text/javascript",r.text=t,n?a.appendChild(r):e.write(r.outerHTML)},q=function(a,t,n,r,s){var i=e.createElement("script");i.id="sas_script"+J++,i.type="text/javascript",i.src=t,i.async=n,sas.events.addLoadEvent(i,r),sas.events.addEvent(i,"error",s),n?a.appendChild(i):e.write(i.outerHTML)},G=function(a){var e=navigator.userAgent.indexOf("iPad")>0,t=""+navigator.userAgent.indexOf("iPhone")>0;return e||t?e?"ipad":"iphone":navigator.userAgent.indexOf("Android")>0?"android":""},V=function(e,t){t=F({forceMasterFlag:!1},t),u=t.forceMasterFlag?!0:u,f=t.resetTimestamp?c():f,K();var n=Y(),i=s()||a.location.origin+a.location.pathname,o=screen.height,d=screen.width;return r(e,n,f,i,t,o,d)},W=function(a,e){return e.domain+"/"+ +e.networkId+"/call"},X=function(e,t,n){n=F({forceMasterFlag:!1},n),u=n.forceMasterFlag?!0:u,f=n.resetTimestamp?c():f,e==sas.callType.ONECALL&&K();var r=Y(),i=s()||a.location.origin+a.location.pathname,o=screen.height,d=screen.width;return function(){return sas.utils.buildUrl(n.domain,e,t,r,f,n.async,n.networkId,E,i,C,S[t.tagId],n.clickTrackingUrl,n.clickTrackingEncodingLevel,o,d)}},Y=function(){return K()?"m":"s"},K=function(){return u?(u=!1,!0):!1},$=function(a){var t=e.getElementById(a);return t||(e.write(B(a).outerHTML),t=e.getElementById(a)),t},z=function(a){var t=U(a);if(t){var n=t.ad.tagId,r=t.ad.formatId+(t.ad.instance>1?"_"+t.ad.instance:"");if(t.options.async&&(!N||t.callType==sas.callType.ONECALL&&!sas_manager||t.callType==sas.callType.ONECALL_JSON&&!t.displayData))return void(w[n]=!0);sas.clean(n),t.options.beforeRender({formatId:r,tagId:n}),t.callType===sas.callType.ONECALL?t=da(n):t.callType===sas.callType.ONECALL_JSON&&(t=ca(n));var s=function(){t.options.onLoad({formatId:r,tagId:n})},i=function(){t.options.onError({formatId:r,tagId:n}),sas.noad(n)};if(t.callType==sas.callType.ONECALL&&sas_manager&&!sas_manager.exists(r)||t.callType==sas.callType.ONECALL_JSON&&t.displayData&&!t.displayData.ScriptSrc)return sas.noad(n),void s();var o=e.getElementById(n);if(o)switch(t.type){case"iframe":H(o,t,s,i);break;case"script":q(o,t.displayData?t.displayData.ScriptSrc:t.url(),t.options.async,s,i);break;case"passback":sas.passback({formatId:t.ad.formatId,chain:t.chain});break;default:throw new Error("Unsupported script type "+t.type)}}},Q=[],Z=function(a){null!=a&&Q.push(a)};sas.events.addLoadEvent(e,function(){d=!0,Q.push=function(a){a()};for(var a=0;a<Q.length;a++)Q[a]()});var aa=!1,ea=function(){aa||(aa=!0,Z(function(){sas.render()}))},ta=function(a){return Math.random()<a},na=function(a,e){if(!a)return!1;if(!e)return!1;var t=sas._networks[e.networkId];return t&&t.f&&t.f[a.formatId]&&ta(t.f[a.formatId])?!0:!1},ra=!1;sas.setup=function(e){if(ra)throw new Error("sas.setup can only be called once");ra=!0,e=e||{},p=e.domain||l,h=e.async||h,sas_ajax=h,v=e.networkid||v,y=e.renderMode||y,N=y==sas.renderMode.DEFAULT,I=e.inSequence||I,E=e.uid,C=F(C,e.partnerIds),a.sas_renderMode=y,sas.configure({id:v})},sas.call=function(t,n,r){"string"!=typeof t&&(r=F({},n,{async:!0}),n=t,t="std"),t==sas.callType.ONECALL&&n.formats&&(t=sas.callType.ONECALL_JSON,r=F({},r,{async:!0})),n.siteId=n.siteId||n.siteid,n.pageId=n.pageId||n.pageid,n.pageName=n.pageName||n.pagename,n.formatId=n.formatId||n.formatid,n.siteId||D(x.ERR_SITE);var s=G();if(s.length>0&&(n.target&&n.target.length>0&&(n.target+=";"),n.target+="platform="+s),n.pageId||n.pageName||D(x.ERR_PAGE),n.formatId||n.formats||D(x.ERR_FORMAT),r=F({},b,{async:h,domain:p,networkId:v},r),r&&r.networkId){var i=parseInt(r.networkId);if(i>0&&!sas._networks[i])return sas._pendingCommands[i]=sas._pendingCommands[i]||[],void sas._pendingCommands[i].push(function(){sas.call(t,n,r)})}if(!na(n,r)){if(!k[t])throw new Error("Unsupported call type "+t);if(!n||!n.siteId||!n.pageId&&!n.pageName||!n.formatId&&!n.formats)throw new Error("Missing parameter(s)");if(n.passback||L.push({callType:t,ad:n,options:r}),t==sas.callType.ONECALL_JSON)for(var d=0;d<n.formats.length;d++){var c=n.formats[d];c.tagId=c.tagId||"sas_"+c.id,c.originalFormatId=c.originalFormatId||c.id,_[c.id]||(_[c.id]=c.tagId)}else t!=sas.callType.ONECALL&&(n.tagId=n.tagId||"sas_"+n.formatId,n.originalFormatId=n.originalFormatId||n.formatId,$(n.tagId),_[n.formatId]||(_[n.formatId]=n.tagId));r.async&&y==sas.renderMode.READY&&ea();var l=r.onLoad;r.onLoad=function(t){var n=U(t.tagId),r=e.getElementById(n.ad.tagId);if(r){var s=r.childNodes.length>1;(a.sas_loadHandler||o)({id:n.ad.formatId,hasAd:s}),l({formatId:n.ad.formatId,tagId:n.ad.tagId,hasAd:s})}},r.async&&I?M({type:t,ad:n,options:r}):k[t](n,r)}},sas.passback=function(a){A[a.formatId]={current:-1,ad:a};var e=U(a.formatId);if(e.options.onNoad){var t=e.options.onNoad;e.options.onNoad=function(e){var n=new Image;n.src=a.noadUrl,t({formatId:e.formatId,tagId:e.tagId})}}else e.options.onNoad=function(e){var t=new Image;t.src=a.noadUrl};sas.next(a.formatId)},sas.next=function(a){var t=U(a),n=A[t.ad.formatId];if(t&&n){var r=e.getElementById(t.ad.tagId);r&&(r.innerHTML=""),n.current>=0&&((new Image).src=n.ad.chain[n.current].noadUrl),n.current++,n.current<n.ad.chain.length&&(n.ad.chain[n.current].countUrl&&((new Image).src=n.ad.chain[n.current].countUrl),n.ad.chain[n.current].script?P(r,n.ad.chain[n.current].script,t.options.async):q(r,n.ad.chain[n.current].scriptUrl,t.options.async))}};var sa={forceMasterFlag:!1,resetTimestamp:!0,target:void 0};sas.refresh=function(a,e){if(N){e=F({},sa,a,e);var t=o;if(arguments.length<=1&&"string"!=typeof a&&isNaN(a)){w={};for(var n in T)w[n]=!0;t=function(a){for(var e=0;e<L.length;e++)L[e].options.async&&(void 0!==a&&null!==a&&(L[e].ad.target=a),k[L[e].callType](L[e].ad,L[e].options))}}else{var n=U(a);if(!n||!n.options.async)return;t=function(a){void 0!==a&&null!==a&&(n.ad.target=a),k[sas.callType.STD](n.ad,n.options)}}u=e.forceMasterFlag?!0:u,f=e.resetTimestamp?c():f,t(e.target)}},sas.getTag=function(a){var t=U(a);return t?e.getElementById(t.ad.tagId):null},sas.clean=function(a){var t=[];if(0==arguments.length)for(var n in T)t.push(n);else{var n=U(a);n&&t.push(n.ad.tagId)}for(var r=0;r<t.length;r++){var a=t[r],n=U(a),s=e.getElementById(n.ad.tagId);n.options.onClean(n.ad.formatId,s),la[a]&&la[a](),s&&(s.innerHTML="")}},sas.noad=function(a){var e=U(a);if(e.callType==sas.callType.ONECALL_JSON&&e.displayData){var t=new Image;t.src=e.displayData.ScriptNoad}else e.callType==sas.callType.ONECALL&&sas_manager&&sas_manager.noad(e.ad.formatId);e.options.onNoad&&e.options.onNoad({formatId:e.ad.formatId,tagId:e.ad.tagId})},sas.render=function(a){var e=[];if(0==arguments.length){if(!N&&(y==sas.renderMode.READY&&d||y==sas.renderMode.ON_DEMAND)){N=!0;for(var t in w){var n=U(t);(n&&n.options.async||!d)&&e.push(t)}w={}}}else{var n=U(a);!n||!n.options.async&&d||(e.push(n.ad.tagId),$(n.ad.tagId))}for(var r=0;r<e.length;r++)z(e[r])},sas.setPartnerId=function(a,e){C[a]=e},sas.appendHtml=function(a,t){var r=e.getElementById(a);if(Range&&Range.prototype.createContextualFragment)r.appendChild(e.createRange().createContextualFragment(t));else{var s=e.createElement("div");s.innerHTML=t;for(var i=s.childNodes,o=0;o<i.length;o++)r.appendChild(n(i[o]))}},sas.configure=function(a){if(a&&a.id&&!(parseInt(a.id)<=0)&&!sas._networks[a.id]&&(sas._networks[a.id]=a,sas._pendingCommands[a.id]))for(var e;e=sas._pendingCommands[a.id].shift();)e()},sas.setHeaderBiddingWinner=function(a,e){S[a]=e},sas.utils.buildUrl=function(a,e,t,n,r,s,i,o,d,c,l,p,f,u,m){var v={};if(null!=i&&(v.nwid=i),v.siteid=t.siteId,v.pgid=t.pageId,v.pgname=t.pageName,v.fmtid=t.formatId,e==sas.callType.IFRAME&&(v.out="iframe"),s&&(v.async=1),e!=sas.callType.ONECALL){var h=n.split("=");v.visit=h.length>1?h[1]:n}else v.oc=1;v.tmstp=r,t.target&&(v.tgt=g(t.target)),e!=sas.callType.ONECALL&&(v.orgfmtid=t.originalFormatId,v.tag=t.tagId),o&&(v.uid=o),u&&(v.sh=u),m&&(v.sw=m),d&&(v.pgDomain=g(d)),l&&e!=sas.callType.ONECALL&&(v.hb_bid=l.bidder,v.hb_cpm=l.cpm,v.hb_ccy=l.currency,v.hb_dealid=l.dealId),p&&(v.clcturl=g(p)),f&&(v.clctenc=clickTrackingEncoding);for(var y in c)v[encodeURIComponent("extuid-"+y)]=encodeURIComponent(c[y]);v.noadcbk="sas.noad";var I=[];for(var E in v)null!=v[E]&&I.push(E+"="+v[E]);return a+"/ac?"+I.join("&")};var ia=function(a,e,t){var n=a.indexOf("/");if(0>n)throw new Error("Invalid argument : sas_pageid");this.siteId=a.substring(0,n);var r=a.substring(n+1);0==r.indexOf("(")&&r.indexOf(")")==r.length-1&&(r=r.slice(1,r.length-1));var s=parseInt(r);s+""==r?this.pageId=s:this.pageName=r,this.formatId=e,this.target=t};a.sas_ads=sas,a.sas_ajax=!1,a.sas_manager=null,a.sas_unrenderedFormats=[],a.sas_callAd=sas.callAd,a.sas_callAds=sas.callAds,sas.callAd=sas.refresh,sas.callAds=function(){N?sas.refresh():sas.render()},sas.cleanAd=sas.clean,sas.cleanAds=sas.clean;var oa=function(a){var t=e.createElement("div");t.innerHTML="_"+a;var n=t.childNodes[1];return{type:n.tagName.toLowerCase(),url:n.src,width:n.width||0,height:n.height||0}},da=function(a){var e=U(a);if(!e)return null;var t=e.ad.formatId+(e.ad.instance>1?"_"+e.ad.instance:"");if(sas_manager&&sas_manager.exists(t)){var n,r=sas_manager.formats["f"+t];n=e.options.async||r.chain?{type:r.scriptType(),url:r.scriptSrc(),chain:r.chain,width:"iframe"==r.scriptType()?r.scriptWidth():0,height:"iframe"==r.scriptType()?r.scriptHeight():0}:oa(r.scriptURL());var s=n.url;n.url=function(){return i(s)},e=j(e.ad.tagId,n)}return e},ca=function(a){var e=U(a);if(!e)return null;if(e.displayData){var t,n=e.displayData;(e.options.async||n.chain)&&(t={ad:e.ad,options:e.options,type:n.ScriptType,url:n.ScriptSrc,chain:n.Chain},"iframe"==e.displayData.ScriptType&&(t.width=n.ScriptWidth,t.height=n.ScriptHeight));var r=t.url;t.url=function(){return i(r)},e=j(e.ad.tagId,t)}return e};a.sas_render=function(a,e,t,n,r){da(a),sas.render(a)},a.SmartAdServerAjaxOneCall=function(a,e){da(e),sas.render(e)},a.SmartAdServer_iframe=function(a,e,t,n,r){var s=new ia(a,e,t);s.width=n,s.height=r,sas.call("iframe",s)},a.SmartAdServer=function(a,e,t){var n=new ia(a,e,t);sas.call(sas.callType.STD,n)},a.SmartAdServerAjax=SmartAdServer,a.sas_gcf=function(a){return e.getElementById("sas_"+a)},a.sas_appendToContainer=function(a,t){var n=e.getElementById("sas_"+a);if(n){if("string"==typeof t){var r=e.createElement("div");r.innerHTML=t,t=r}n.appendChild(t)}},a.sascc=function(a,e){var t=new Image;t.src=p+"/h/mcp?imgid="+a+"&pgid="+e+"&uid=[uid]&tmstp="+f+"&tgt=[targeting]"},a.sasmobile=function(a,e,t){var n=new ia(a,e,t);sas.call(sas.callType.STD,n)};var la={};a.sas_addCleanListener=function(a,e){la[a]=e},a.sas_cleanAds=sas.clean,a.sas_cleanAd=sas.clean,sas.cmd=sas.cmd||[],sas.cmd.push=function(a){a()};for(var pa=0;pa<sas.cmd.length;pa++)sas.cmd[pa]()}}(window,document);